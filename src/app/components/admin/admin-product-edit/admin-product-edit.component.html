<div class="container-fluid">
  <h2 class="section-intro__style mb-4">Edit Product</h2>

  <form *ngIf="product" (ngSubmit)="saveProduct()" #productForm="ngForm">
    <div class="row">
      <!-- Product Image Upload -->
      <div class="col-md-12 mb-4">
        <label class="form-label">Product Photo</label>
        <div class="d-flex align-items-center">
          <div class="me-3">
            <img [src]="product.photo" 
                 alt="Product Image" 
                 class="img-thumbnail product-preview" 
                 style="width: 100px; height: 100px; object-fit: cover;">
          </div>
          <div>
            <input type="file" 
                   class="form-control" 
                   accept="image/*" 
                   (change)="onImageSelected($event)"
                   #fileInput>
            <small class="text-muted">Upload product image (JPG, PNG, GIF - Max 5MB)</small>
          </div>
        </div>
      </div>

      <!-- Product Details -->
      <div class="col-md-6">
        <div class="form-group mb-3">
          <label class="form-label">Name <span class="text-danger">*</span></label>
          <input class="form-control" 
                 [(ngModel)]="product.name" 
                 (ngModelChange)="trackChange('name', $event)"
                 name="name"
                 required>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group mb-3">
          <label class="form-label">Brand <span class="text-danger">*</span></label>
          <input class="form-control" 
                 [(ngModel)]="product.brand" 
                 (ngModelChange)="trackChange('brand', $event)"
                 name="brand"
                 required>
        </div>
      </div>

      <div class="col-md-12">
        <div class="form-group mb-3">
          <label class="form-label">Description</label>
          <textarea class="form-control" 
                    rows="3"
                    [(ngModel)]="product.description" 
                    (ngModelChange)="trackChange('description', $event)"
                    name="description"></textarea>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-group mb-3">
          <label class="form-label">Price <span class="text-danger">*</span></label>
          <input type="number" 
                 class="form-control" 
                 [(ngModel)]="product.price" 
                 (ngModelChange)="trackChange('price', $event)"
                 name="price"
                 min="0"
                 step="0.01"
                 required>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-group mb-3">
          <label class="form-label">Quantity <span class="text-danger">*</span></label>
          <input type="number" 
                 class="form-control" 
                 [(ngModel)]="product.quantity" 
                 (ngModelChange)="trackChange('quantity', $event)"
                 name="quantity"
                 min="0"
                 required>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-group mb-3">
          <label class="form-label">Size <span class="text-danger">*</span></label>
          <input class="form-control" 
                 [(ngModel)]="product.size"
                 (ngModelChange)="trackChange('size', $event)" 
                 name="size"
                 required>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-group mb-3">
          <label class="form-label">Gender <span class="text-danger">*</span></label>
          <select class="form-control" 
                  [(ngModel)]="product.gender" 
                  (ngModelChange)="trackChange('gender', $event)"
                  name="gender"
                  required>
            <option value="">Select Gender</option>
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Unisex">Unisex</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="d-flex justify-content-between mt-4">
      <button type="button" 
              class="btn btn-secondary custom-btn" 
              (click)="goBack()">
        <i class="fa fa-arrow-left"></i> Back to Products
      </button>
      
      <button type="submit" 
              class="btn btn-primary custom-btn"
              [disabled]="!productForm.valid">
        <i class="fa fa-save"></i> Update Product
      </button>
    </div>
  </form>

  <div *ngIf="!product" class="text-center">
    <p>Product not found.</p>
    <button class="btn btn-secondary" (click)="goBack()">Back to Products</button>
  </div>
</div>